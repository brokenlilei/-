<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <button>1111</button>
    <button>2222</button>
    <button>3333</button>
    <p id="p">第一张图片</p>

    <input type="button" value="后退" id="btn"/>
<script>
  /*
        history:
           浏览器的历史记录，能够使用前进后退，还可以伪造URL地址并且不刷新页面

           back  返回
           forward 前进
           go(1) 前进 ->  -1 倒退
           pushState    记录URL状态的
           replaceState    替换记录
           
           [/a,/b,/d,/e]

           pushState(数据，null，伪造的URL)

           注意：伪造的URL如果没有服务器配合，那么就不能刷新页面，不然一刷新就会又去找服务器，最后会报404

  */

  window.history.pushState({
      num:0
  },'','http://localhost:88/6_history.html/1');



  let ary = ['第一张图片','第二张图片','第三张图片'];
  const btns = document.querySelectorAll('button');


  btns.forEach((ele,i) =>{
      ele.opnclick = function(){
          p.innerHTML = ary[i];
          window.history.pushState({
              num:i
          },'','http://localhost:88/6_history.html/1'+i);
        }      

    });
    btn.onclick = function(){
        window.history.go(-1);
    }   
    // 当操作历史记录的时候去触发这个事件
    window.onpopstate = function(ev){
        // console.log();
        // 触发这个事件时，通过ev.state去拿之前的存的数据
        p.innerHTML = ary[ev.pushState.num];
    
      }
  
</script>    
</body>
</html>